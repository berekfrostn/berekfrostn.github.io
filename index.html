<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lumineuse Store</title>
    <link rel="stylesheet" href="css/style.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
</head>
<body>

    <!-- NAVBAR -->
    <header class="navbar">
        <div class="logo">Lumineuse</div>

        <nav>
            <a href="#">Home</a>
            <a href="#">Shop</a>
            <a href="#">Pages</a>
            <a href="#footer-about">About Us</a>
            <a href="#">Contact Us</a>
        </nav>

        <div class="nav-text-links">
            <a href="#">Search</a>
            <a href="#">Cart</a>
        </div>
    </header>

    <!-- HERO -->
    <section class="hero">
        <!-- Akan diisi oleh JS dengan /slidebg/1.webp, dll -->
        <img src="/slidebg/1.webp" class="hero-bg" onerror="this.src='/slidebg/1.webp'">
        <div class="hero-content">
            <h1>EMBRANCING<br>THE CHILL</h1>
            <button class="btn">Discovery Now</button>
        </div>

        <button class="arrow left">‹</button>
        <button class="arrow right">›</button>
    </section>
    
    <section class="products" id="products-section">
        <h2>New Arrivals</h2>
        <div class="products-grid" id="products-grid">
        <!-- Products will be inserted here by JavaScript -->
        </div>
    </section>
	
    <!-- FOOTER -->
    <footer class="footer" id="footer-about">
        <div class="footer-col">
            <h3>Customer Service</h3>
            <a href="#">Help Center</a>
            <a href="#">Shipping Info</a>
            <a href="#">Returns & Refunds</a>
            <a href="#">Track Order</a>
        </div>

        <div class="footer-col">
            <h3>Company</h3>
            <a href="#">Careers</a>
            <a href="#">Partnership</a>
            <a href="#">Press</a>
        </div>

        <div class="footer-col">
            <h3>Follow Us</h3>
            <a href="#">Instagram</a>
            <a href="#">Facebook</a>
            <a href="#">Twitter</a>
        </div>
    </footer>

<script>
// === KONFIGURASI SLIDE HERO ===
const totalHeroSlides = 5; // Sesuaikan: 1.webp sampai 5.webp → isi 5
let currentSlide = 1;
let slideInterval;

const heroImg = document.querySelector('.hero-bg');
const btnLeft = document.querySelector('.arrow.left');
const btnRight = document.querySelector('.arrow.right');

// === Ganti gambar hero ===
function updateHeroSlide(index) {
    heroImg.src = `/slidebg/${index}.webp`;
    heroImg.onerror = () => { heroImg.src = `/slidebg/1.webp`; };
}

// === Navigasi manual ===
btnLeft.addEventListener('click', () => {
    currentSlide = currentSlide > 1 ? currentSlide - 1 : totalHeroSlides;
    updateHeroSlide(currentSlide);
    resetAutoSlide();
});

btnRight.addEventListener('click', () => {
    currentSlide = currentSlide < totalHeroSlides ? currentSlide + 1 : 1;
    updateHeroSlide(currentSlide);
    resetAutoSlide();
});

// === Auto slide setiap 2 detik ===
function startAutoSlide() {
    slideInterval = setInterval(() => {
        currentSlide = currentSlide < totalHeroSlides ? currentSlide + 1 : 1;
        updateHeroSlide(currentSlide);
    }, 2000);
}

function resetAutoSlide() {
    clearInterval(slideInterval);
    startAutoSlide();
}

// === LOAD PRODUK (dengan placeholder berurut) ===
document.addEventListener('DOMContentLoaded', async () => {
    // Jalankan hero slider
    updateHeroSlide(currentSlide);
    startAutoSlide();

    // Load produk seperti asli
    try {
        const response = await fetch('/api/products');
        const products = await response.json();

        const grid = document.getElementById('products-grid');
        grid.innerHTML = '';

        products.forEach((product, index) => {
            const cleanFilename = product.photo_url.replace('/uploads/', '');
            const placeholderNum = (index % 10) + 1; // asumsi 10 placeholder
            const placeholderUrl = `/placeholder/${placeholderNum}.webp`;

            const productEl = document.createElement('div');
            productEl.className = 'product-card';

            productEl.innerHTML = `
                <img src="/photo?file=${cleanFilename}"
                     alt="${product.name}"
                     onerror="this.src='${placeholderUrl}'">
                <h3>${product.name}</h3>
                <p class="price">Rp ${product.price}</p>
            `;

            grid.appendChild(productEl);
        });

    } catch (error) {
        console.error(error);
    }
});
</script>
</body>
</html>